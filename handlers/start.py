from aiogram import Router, F
from aiogram.filters.command import CommandStart
from aiogram.fsm.context import FSMContext
from aiogram.types import Message

from keyboards.start import get_start_kb
from states.lead import LeadForm

router = Router()


@router.message(CommandStart())
async def start_handler(message: Message, state: FSMContext):
    args = message.text.split()
    if len(args) == 1:
        await message.answer("–î–æ–±—Ä–æ –ü–æ–∂–∞–ª–æ–≤–∞—Ç—å", reply_markup=get_start_kb())
        await state.clear()
    else:
        target_id = args[1]
        await message.answer("üéØ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ü–æ—Ö–æ–∂–µ, –≤—ã –ø—Ä–∏—à–ª–∏ –ø–æ —Ä–µ–∫–ª–∞–º–µ.\n\n–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –§–ò–û:")
        await state.set_state(LeadForm.full_name)
        await state.update_data(target_id=target_id)


@router.message(F.text == "–û –ù–∞—Å")
async def about_handler(message: Message):
    await message.answer(
"""üí° **–û –∫–æ–º–ø–∞–Ω–∏–∏ IT 911**  
        
–ú—ã —Å–æ–∑–¥–∞—ë–º **IT-—Ä–µ—à–µ–Ω–∏—è**, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –±–∏–∑–Ω–µ—Å –ø—Ä–æ—â–µ.  
–ù–∞—à —Å–µ—Ä–≤–∏—Å –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç **CRM**, **—É—á—ë—Ç**, **–ø–æ–¥–¥–µ—Ä–∂–∫—É**, **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é** –∏ **–∞–Ω–∞–ª–∏—Ç–∏–∫—É** ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–º –ø–æ–¥–ø–∏—Å–æ—á–Ω–æ–º –ø–∞–∫–µ—Ç–µ.  
        
üì¶ **–ß—Ç–æ –º—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º:**
‚Ä¢ **CRM-—Å–∏—Å—Ç–µ–º—ã** ‚Äî –ø—Ä–æ–¥–∞–∂–∏, –∫–ª–∏–µ–Ω—Ç—ã, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è  
‚Ä¢ **–£—á—ë—Ç –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** ‚Äî —Ñ–∏–Ω–∞–Ω—Å—ã, —Å–∫–ª–∞–¥, –æ—Ç—á—ë—Ç—ã  
‚Ä¢ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7** ‚Äî –±—ã—Å—Ç—Ä–æ —Ä–µ–∞–≥–∏—Ä—É–µ–º –∏ —Ä–µ—à–∞–µ–º –ø—Ä–æ–±–ª–µ–º—ã  
‚Ä¢ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** ‚Äî Telegram-–±–æ—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∞–π—Ç–∞–º–∏ –∏ 1–°  
‚Ä¢ **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ** ‚Äî —Ö–æ—Å—Ç–∏–Ω–≥, —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å  
        
üéØ **–ù–∞—à–∞ —Ü–µ–ª—å:**
–ü–æ–º–æ—á—å –∫–æ–º–ø–∞–Ω–∏—è–º –ª—é–±–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∞ **—Ä–∞—Å—Ç–∏**, –Ω–µ —Ç—Ä–∞—Ç—è –≤—Ä–µ–º—è –∏ —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –ø–æ–∏—Å–∫ –¥–µ—Å—è—Ç–∫–æ–≤ –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤.  
–ú—ã –æ–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è **—Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ü–∏—Ñ—Ä–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã –±–∏–∑–Ω–µ—Å–∞** ‚Äî –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.  
        
‚öôÔ∏è **–ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
‚Ä¢ **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã (TCO)**  
‚Ä¢ **–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç** –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤  
‚Ä¢ **–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –∏ —Ç–∞—Ä–∏—Ñ–æ–≤**  
‚Ä¢ **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** –ø–æ–¥ —Ä—ã–Ω–æ–∫ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞  
‚Ä¢ **–≠–∫–æ–Ω–æ–º–∏—è** –∑–∞ —Å—á—ë—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è 5‚Äì6 —Å–µ—Ä–≤–∏—Å–æ–≤  
        
üåê **–ü–æ–¥—Ä–æ–±–Ω–µ–µ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ:**  
üëâ https://it911.uz
        
üìû **–ö–æ–Ω—Ç–∞–∫—Ç—ã:**  
‚úâÔ∏è info@it911.com  
üì± +998 90 329 77 00  
üìç **Chorsu MFY, –¥–æ–º 4, –∫–≤. 135**"""
    )


@router.message(F.text == "–°—Ç–∞—Ç—å –ö–ª–∏–µ–Ω—Ç–æ–º")
async def lead_handler(message: Message, state: FSMContext):
    await message.answer("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –§–ò–û:")
    await state.set_state(LeadForm.full_name)


@router.message(F.text == "–£–∂–µ –ö–ª–∏–µ–Ω—Ç")
async def company_handler(message: Message):
    await message.answer("–í –≠—Ç–∞–ø–µ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏")
